## CORS 与 JSONP

常用的两种跨域方式。

### 预览 CORS 跨域

在两个终端开启三个服务，使用不同的端口模拟不同的服务器。

本项目是模拟 8888 端口的源允许 9001 端口的源访问 `/friends` 路径并获取数据。

```sh
# 一个终端
node server-cors.js 8888
```

另一个终端：

```sh
# 另一个终端
node server-cors.js 9001
```

再一个终端：

```sh
# 再一个终端
node server-cors.js 9010
```

这时，除了 8888 端口地址 可以自我获取数据之外，只有 9001 端口可以访问。

如果 9010 端口访问，则会被浏览器警示因同源策略拒绝访问。

### 预览 JSONP 跨域

在两个终端开启三个服务，使用不同的端口模拟不同的服务器。

本项目是只允许 9001 端口的源访问 `/friends` 路径并获取数据。

获取的数据打印在控制台。

```sh
# 一个终端
node server-jsonp.js 8888
```

另一个终端：

```sh
# 另一个终端
node server-jsonp.js 9001
```

再一个终端：

```sh
# 再一个终端
node server-jsonp.js 9010
```

只有在 9001 端口可以获取到 8888 端口的数据，9010 端口点击按钮则会得到错误404的响应。

对于 8888 端口本身点击跨域按钮也会返回404，这是因为服务端设置了 referer 检查，只允许 9001 端口访问。你应该为本身设置另外的路径来直接获取数据，而无需再转换。